<template>
    <lightning-card title="Movie Catalog Filter" icon-name="standard:video">
        <div class="slds-p-around_medium">
            <lightning-layout vertical-align="end">
                <lightning-layout-item size="10">
                    <!-- Genre select -->
                    <lightning-combobox
                        label="Select Genre"
                        name="genre"
                        placeholder="Choose a genre"
                        options={genreOptions}
                        value={selectedGenre}
                        onchange={handleGenreChange}>
                    </lightning-combobox>
                </lightning-layout-item>

                <lightning-layout-item margin="left-small">
                     <!-- Filter button -->
                    <lightning-button
                        label="Filter Movies"
                        variant="brand"
                        class="slds-m-top_medium"
                        onclick={filterMovies}>
                    </lightning-button>
                </lightning-layout-item>
            </lightning-layout>

            <!-- Display filtered -->
            <template if:true={filteredMovies}>

                <lightning-layout vertical-align="center" multiple-rows="true">
                    <template for:each={filteredMovies} for:item="movie">
                        <lightning-layout-item key={movie.Id} size="3">
                            <c-movie-card
                                poster={movie.Poster__c}
                                rating={movie.RatingCalculated__c}
                                genre={movie.Genre__c}
                                title={movie.Title__c}>
                            </c-movie-card>
                        </lightning-layout-item>
                    </template>
                </lightning-layout>

            </template>
        </div>
    </lightning-card>
</template>
